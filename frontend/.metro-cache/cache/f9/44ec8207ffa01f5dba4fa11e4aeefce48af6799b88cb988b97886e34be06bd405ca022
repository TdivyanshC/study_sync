{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":39,"index":39}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"apiService\", {\n    enumerable: true,\n    get: function () {\n      return apiService;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _expoConstants = require(_dependencyMap[1], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  // Types for API responses\n\n  class ApiService {\n    constructor() {\n      // Get backend URL from environment\n      this.baseUrl = Constants.default.expoConfig?.extra?.backendUrl || _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || 'http://localhost:8001';\n\n      // Ensure it has /api suffix\n      if (!this.baseUrl.endsWith('/api')) {\n        this.baseUrl += '/api';\n      }\n      console.log('API Service initialized with base URL:', this.baseUrl);\n    }\n\n    // Generic fetch wrapper with error handling\n    async fetchWithErrorHandling(url, options = {}) {\n      try {\n        const response = await fetch(`${this.baseUrl}${url}`, Object.assign({\n          headers: Object.assign({\n            'Content-Type': 'application/json'\n          }, options.headers)\n        }, options));\n        if (!response.ok) {\n          const errorText = await response.text();\n          throw new Error(`HTTP ${response.status}: ${errorText}`);\n        }\n        return await response.json();\n      } catch (error) {\n        console.error(`API Error - ${url}:`, error);\n        throw error;\n      }\n    }\n\n    // Health check\n    async healthCheck() {\n      return this.fetchWithErrorHandling('/');\n    }\n\n    // Create a new study session\n    async createSession(sessionData) {\n      console.log('Creating session:', sessionData);\n      return this.fetchWithErrorHandling('/sessions', {\n        method: 'POST',\n        body: JSON.stringify(sessionData)\n      });\n    }\n\n    // Update an existing study session\n    async updateSession(sessionId, updateData) {\n      console.log(`Updating session ${sessionId}:`, updateData);\n      return this.fetchWithErrorHandling(`/sessions/${sessionId}`, {\n        method: 'PUT',\n        body: JSON.stringify(updateData)\n      });\n    }\n\n    // Get all sessions for a user\n    async getUserSessions(userId) {\n      console.log(`Getting sessions for user: ${userId}`);\n      return this.fetchWithErrorHandling(`/sessions/${userId}`);\n    }\n\n    // End a study session\n    async endSession(sessionId, duration) {\n      const endTime = new Date().toISOString();\n      return this.updateSession(sessionId, {\n        duration,\n        is_active: false,\n        end_time: endTime\n      });\n    }\n\n    // Set session to break mode\n    async setSessionBreak(sessionId, isBreak) {\n      return this.updateSession(sessionId, {\n        is_break: isBreak\n      });\n    }\n\n    // Update session duration (called periodically while timer is running)\n    async updateSessionDuration(sessionId, duration) {\n      return this.updateSession(sessionId, {\n        duration\n      });\n    }\n  }\n\n  // Export singleton instance\n  const apiService = new ApiService();\n  var _default = apiService;\n});","lineCount":117,"map":[[12,2,129,0,"Object"],[12,8,129,0],[12,9,129,0,"defineProperty"],[12,23,129,0],[12,24,129,0,"exports"],[12,31,129,0],[13,4,129,0,"enumerable"],[13,14,129,0],[14,4,129,0,"get"],[14,7,129,0],[14,18,129,0,"get"],[14,19,129,0],[15,6,129,0],[15,13,129,0,"_default"],[15,21,129,0],[16,4,129,0],[17,2,129,0],[18,2,128,0,"Object"],[18,8,128,0],[18,9,128,0,"defineProperty"],[18,23,128,0],[18,24,128,0,"exports"],[18,31,128,0],[19,4,128,0,"enumerable"],[19,14,128,0],[20,4,128,0,"get"],[20,7,128,0],[20,18,128,0,"get"],[20,19,128,0],[21,6,128,0],[21,13,128,0,"apiService"],[21,23,128,0],[22,4,128,0],[23,2,128,0],[24,2,128,43],[24,6,128,43,"_expoVirtualEnv"],[24,21,128,43],[24,24,128,43,"require"],[24,31,128,43],[24,32,128,43,"_dependencyMap"],[24,46,128,43],[25,2,1,0],[25,6,1,0,"_expoConstants"],[25,20,1,0],[25,23,1,0,"require"],[25,30,1,0],[25,31,1,0,"_dependencyMap"],[25,45,1,0],[26,2,1,0],[26,6,1,0,"Constants"],[26,15,1,0],[26,18,1,0,"_interopDefault"],[26,33,1,0],[26,34,1,0,"_expoConstants"],[26,48,1,0],[27,2,3,0],[29,2,27,0],[29,8,27,6,"ApiService"],[29,18,27,16],[29,19,27,17],[30,4,30,2,"constructor"],[30,15,30,13,"constructor"],[30,16,30,13],[30,18,30,16],[31,6,31,4],[32,6,32,4],[32,10,32,8],[32,11,32,9,"baseUrl"],[32,18,32,16],[32,21,32,19,"Constants"],[32,30,32,28],[32,31,32,28,"default"],[32,38,32,28],[32,39,32,29,"expoConfig"],[32,49,32,39],[32,51,32,41,"extra"],[32,56,32,46],[32,58,32,48,"backendUrl"],[32,68,32,58],[32,72,32,58,"_expoVirtualEnv"],[32,87,32,58],[32,88,32,58,"env"],[32,91,32,58],[32,92,32,58,"EXPO_PUBLIC_BACKEND_URL"],[32,115,33,54],[32,119,34,19],[32,142,34,42],[34,6,36,4],[35,6,37,4],[35,10,37,8],[35,11,37,9],[35,15,37,13],[35,16,37,14,"baseUrl"],[35,23,37,21],[35,24,37,22,"endsWith"],[35,32,37,30],[35,33,37,31],[35,39,37,37],[35,40,37,38],[35,42,37,40],[36,8,38,6],[36,12,38,10],[36,13,38,11,"baseUrl"],[36,20,38,18],[36,24,38,22],[36,30,38,28],[37,6,39,4],[38,6,41,4,"console"],[38,13,41,11],[38,14,41,12,"log"],[38,17,41,15],[38,18,41,16],[38,58,41,56],[38,60,41,58],[38,64,41,62],[38,65,41,63,"baseUrl"],[38,72,41,70],[38,73,41,71],[39,4,42,2],[41,4,44,2],[42,4,45,2],[42,10,45,16,"fetchWithErrorHandling"],[42,32,45,38,"fetchWithErrorHandling"],[42,33,46,4,"url"],[42,36,46,15],[42,38,47,4,"options"],[42,45,47,24],[42,48,47,27],[42,49,47,28],[42,50,47,29],[42,52,48,16],[43,6,49,4],[43,10,49,8],[44,8,50,6],[44,14,50,12,"response"],[44,22,50,20],[44,25,50,23],[44,31,50,29,"fetch"],[44,36,50,34],[44,37,50,35],[44,40,50,38],[44,44,50,42],[44,45,50,43,"baseUrl"],[44,52,50,50],[44,55,50,53,"url"],[44,58,50,56],[44,60,50,58],[44,62,50,58,"Object"],[44,68,50,58],[44,69,50,58,"assign"],[44,75,50,58],[45,10,51,8,"headers"],[45,17,51,15],[45,19,51,15,"Object"],[45,25,51,15],[45,26,51,15,"assign"],[45,32,51,15],[46,12,52,10],[46,26,52,24],[46,28,52,26],[47,10,52,44],[47,13,53,13,"options"],[47,20,53,20],[47,21,53,21,"headers"],[47,28,53,28],[48,8,54,9],[48,11,55,11,"options"],[48,18,55,18],[48,19,56,7],[48,20,56,8],[49,8,58,6],[49,12,58,10],[49,13,58,11,"response"],[49,21,58,19],[49,22,58,20,"ok"],[49,24,58,22],[49,26,58,24],[50,10,59,8],[50,16,59,14,"errorText"],[50,25,59,23],[50,28,59,26],[50,34,59,32,"response"],[50,42,59,40],[50,43,59,41,"text"],[50,47,59,45],[50,48,59,46],[50,49,59,47],[51,10,60,8],[51,16,60,14],[51,20,60,18,"Error"],[51,25,60,23],[51,26,60,24],[51,34,60,32,"response"],[51,42,60,40],[51,43,60,41,"status"],[51,49,60,47],[51,54,60,52,"errorText"],[51,63,60,61],[51,65,60,63],[51,66,60,64],[52,8,61,6],[53,8,63,6],[53,15,63,13],[53,21,63,19,"response"],[53,29,63,27],[53,30,63,28,"json"],[53,34,63,32],[53,35,63,33],[53,36,63,34],[54,6,64,4],[54,7,64,5],[54,8,64,6],[54,15,64,13,"error"],[54,20,64,18],[54,22,64,20],[55,8,65,6,"console"],[55,15,65,13],[55,16,65,14,"error"],[55,21,65,19],[55,22,65,20],[55,37,65,35,"url"],[55,40,65,38],[55,43,65,41],[55,45,65,43,"error"],[55,50,65,48],[55,51,65,49],[56,8,66,6],[56,14,66,12,"error"],[56,19,66,17],[57,6,67,4],[58,4,68,2],[60,4,70,2],[61,4,71,2],[61,10,71,15,"healthCheck"],[61,21,71,26,"healthCheck"],[61,22,71,26],[61,24,71,59],[62,6,72,4],[62,13,72,11],[62,17,72,15],[62,18,72,16,"fetchWithErrorHandling"],[62,40,72,38],[62,41,72,60],[62,44,72,63],[62,45,72,64],[63,4,73,2],[65,4,75,2],[66,4,76,2],[66,10,76,15,"createSession"],[66,23,76,28,"createSession"],[66,24,76,29,"sessionData"],[66,35,76,62],[66,37,76,87],[67,6,77,4,"console"],[67,13,77,11],[67,14,77,12,"log"],[67,17,77,15],[67,18,77,16],[67,37,77,35],[67,39,77,37,"sessionData"],[67,50,77,48],[67,51,77,49],[68,6,78,4],[68,13,78,11],[68,17,78,15],[68,18,78,16,"fetchWithErrorHandling"],[68,40,78,38],[68,41,78,53],[68,52,78,64],[68,54,78,66],[69,8,79,6,"method"],[69,14,79,12],[69,16,79,14],[69,22,79,20],[70,8,80,6,"body"],[70,12,80,10],[70,14,80,12,"JSON"],[70,18,80,16],[70,19,80,17,"stringify"],[70,28,80,26],[70,29,80,27,"sessionData"],[70,40,80,38],[71,6,81,4],[71,7,81,5],[71,8,81,6],[72,4,82,2],[74,4,84,2],[75,4,85,2],[75,10,85,15,"updateSession"],[75,23,85,28,"updateSession"],[75,24,86,4,"sessionId"],[75,33,86,21],[75,35,87,4,"updateData"],[75,45,87,36],[75,47,88,27],[76,6,89,4,"console"],[76,13,89,11],[76,14,89,12,"log"],[76,17,89,15],[76,18,89,16],[76,38,89,36,"sessionId"],[76,47,89,45],[76,50,89,48],[76,52,89,50,"updateData"],[76,62,89,60],[76,63,89,61],[77,6,90,4],[77,13,90,11],[77,17,90,15],[77,18,90,16,"fetchWithErrorHandling"],[77,40,90,38],[77,41,90,53],[77,54,90,66,"sessionId"],[77,63,90,75],[77,65,90,77],[77,67,90,79],[78,8,91,6,"method"],[78,14,91,12],[78,16,91,14],[78,21,91,19],[79,8,92,6,"body"],[79,12,92,10],[79,14,92,12,"JSON"],[79,18,92,16],[79,19,92,17,"stringify"],[79,28,92,26],[79,29,92,27,"updateData"],[79,39,92,37],[80,6,93,4],[80,7,93,5],[80,8,93,6],[81,4,94,2],[83,4,96,2],[84,4,97,2],[84,10,97,15,"getUserSessions"],[84,25,97,30,"getUserSessions"],[84,26,97,31,"userId"],[84,32,97,45],[84,34,97,72],[85,6,98,4,"console"],[85,13,98,11],[85,14,98,12,"log"],[85,17,98,15],[85,18,98,16],[85,48,98,46,"userId"],[85,54,98,52],[85,56,98,54],[85,57,98,55],[86,6,99,4],[86,13,99,11],[86,17,99,15],[86,18,99,16,"fetchWithErrorHandling"],[86,40,99,38],[86,41,99,55],[86,54,99,68,"userId"],[86,60,99,74],[86,62,99,76],[86,63,99,77],[87,4,100,2],[89,4,102,2],[90,4,103,2],[90,10,103,15,"endSession"],[90,20,103,25,"endSession"],[90,21,103,26,"sessionId"],[90,30,103,43],[90,32,103,45,"duration"],[90,40,103,61],[90,42,103,86],[91,6,104,4],[91,12,104,10,"endTime"],[91,19,104,17],[91,22,104,20],[91,26,104,24,"Date"],[91,30,104,28],[91,31,104,29],[91,32,104,30],[91,33,104,31,"toISOString"],[91,44,104,42],[91,45,104,43],[91,46,104,44],[92,6,105,4],[92,13,105,11],[92,17,105,15],[92,18,105,16,"updateSession"],[92,31,105,29],[92,32,105,30,"sessionId"],[92,41,105,39],[92,43,105,41],[93,8,106,6,"duration"],[93,16,106,14],[94,8,107,6,"is_active"],[94,17,107,15],[94,19,107,17],[94,24,107,22],[95,8,108,6,"end_time"],[95,16,108,14],[95,18,108,16,"endTime"],[96,6,109,4],[96,7,109,5],[96,8,109,6],[97,4,110,2],[99,4,112,2],[100,4,113,2],[100,10,113,15,"setSessionBreak"],[100,25,113,30,"setSessionBreak"],[100,26,113,31,"sessionId"],[100,35,113,48],[100,37,113,50,"isBreak"],[100,44,113,66],[100,46,113,91],[101,6,114,4],[101,13,114,11],[101,17,114,15],[101,18,114,16,"updateSession"],[101,31,114,29],[101,32,114,30,"sessionId"],[101,41,114,39],[101,43,114,41],[102,8,115,6,"is_break"],[102,16,115,14],[102,18,115,16,"isBreak"],[103,6,116,4],[103,7,116,5],[103,8,116,6],[104,4,117,2],[106,4,119,2],[107,4,120,2],[107,10,120,15,"updateSessionDuration"],[107,31,120,36,"updateSessionDuration"],[107,32,120,37,"sessionId"],[107,41,120,54],[107,43,120,56,"duration"],[107,51,120,72],[107,53,120,97],[108,6,121,4],[108,13,121,11],[108,17,121,15],[108,18,121,16,"updateSession"],[108,31,121,29],[108,32,121,30,"sessionId"],[108,41,121,39],[108,43,121,41],[109,8,122,6,"duration"],[110,6,123,4],[110,7,123,5],[110,8,123,6],[111,4,124,2],[112,2,125,0],[114,2,127,0],[115,2,128,7],[115,8,128,13,"apiService"],[115,18,128,23],[115,21,128,26],[115,25,128,30,"ApiService"],[115,35,128,40],[115,36,128,41],[115,37,128,42],[116,2,129,0],[116,6,129,0,"_default"],[116,14,129,0],[116,17,129,15,"apiService"],[116,27,129,25],[117,0,129,26],[117,3]],"functionMap":{"names":["<global>","ApiService","ApiService#constructor","ApiService#fetchWithErrorHandling","ApiService#healthCheck","ApiService#createSession","ApiService#updateSession","ApiService#getUserSessions","ApiService#endSession","ApiService#setSessionBreak","ApiService#updateSessionDuration"],"mappings":"AAA;AC0B;ECG;GDY;EEG;GFuB;EGG;GHE;EIG;GJM;EKG;GLS;EMG;GNG;EOG;GPO;EQG;GRI;ESG;GTI;CDC"},"hasCjsExports":false},"type":"js/module"}]}
{"dependencies":[{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":39,"index":39}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"apiService\", {\n    enumerable: true,\n    get: function () {\n      return apiService;\n    }\n  });\n  var _expoConstants = require(_dependencyMap[0], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  // Types for API responses\n\n  class ApiService {\n    constructor() {\n      // Get backend URL from environment\n      this.baseUrl = Constants.default.expoConfig?.extra?.backendUrl || process.env.EXPO_PUBLIC_BACKEND_URL || 'http://localhost:8001';\n\n      // Ensure it has /api suffix\n      if (!this.baseUrl.endsWith('/api')) {\n        this.baseUrl += '/api';\n      }\n      console.log('API Service initialized with base URL:', this.baseUrl);\n    }\n\n    // Generic fetch wrapper with error handling\n    async fetchWithErrorHandling(url, options = {}) {\n      try {\n        const response = await fetch(`${this.baseUrl}${url}`, {\n          headers: {\n            'Content-Type': 'application/json',\n            ...options.headers\n          },\n          ...options\n        });\n        if (!response.ok) {\n          const errorText = await response.text();\n          throw new Error(`HTTP ${response.status}: ${errorText}`);\n        }\n        return await response.json();\n      } catch (error) {\n        console.error(`API Error - ${url}:`, error);\n        throw error;\n      }\n    }\n\n    // Health check\n    async healthCheck() {\n      return this.fetchWithErrorHandling('/');\n    }\n\n    // Create a new study session\n    async createSession(sessionData) {\n      console.log('Creating session:', sessionData);\n      return this.fetchWithErrorHandling('/sessions', {\n        method: 'POST',\n        body: JSON.stringify(sessionData)\n      });\n    }\n\n    // Update an existing study session\n    async updateSession(sessionId, updateData) {\n      console.log(`Updating session ${sessionId}:`, updateData);\n      return this.fetchWithErrorHandling(`/sessions/${sessionId}`, {\n        method: 'PUT',\n        body: JSON.stringify(updateData)\n      });\n    }\n\n    // Get all sessions for a user\n    async getUserSessions(userId) {\n      console.log(`Getting sessions for user: ${userId}`);\n      return this.fetchWithErrorHandling(`/sessions/${userId}`);\n    }\n\n    // End a study session\n    async endSession(sessionId, duration) {\n      const endTime = new Date().toISOString();\n      return this.updateSession(sessionId, {\n        duration,\n        is_active: false,\n        end_time: endTime\n      });\n    }\n\n    // Set session to break mode\n    async setSessionBreak(sessionId, isBreak) {\n      return this.updateSession(sessionId, {\n        is_break: isBreak\n      });\n    }\n\n    // Update session duration (called periodically while timer is running)\n    async updateSessionDuration(sessionId, duration) {\n      return this.updateSession(sessionId, {\n        duration\n      });\n    }\n  }\n\n  // Export singleton instance\n  const apiService = new ApiService();\n  var _default = apiService;\n});","lineCount":118,"map":[[12,2,129,0,"Object"],[12,8,129,0],[12,9,129,0,"defineProperty"],[12,23,129,0],[12,24,129,0,"exports"],[12,31,129,0],[13,4,129,0,"enumerable"],[13,14,129,0],[14,4,129,0,"get"],[14,7,129,0],[14,18,129,0,"get"],[14,19,129,0],[15,6,129,0],[15,13,129,0,"_default"],[15,21,129,0],[16,4,129,0],[17,2,129,0],[18,2,128,0,"Object"],[18,8,128,0],[18,9,128,0,"defineProperty"],[18,23,128,0],[18,24,128,0,"exports"],[18,31,128,0],[19,4,128,0,"enumerable"],[19,14,128,0],[20,4,128,0,"get"],[20,7,128,0],[20,18,128,0,"get"],[20,19,128,0],[21,6,128,0],[21,13,128,0,"apiService"],[21,23,128,0],[22,4,128,0],[23,2,128,0],[24,2,1,0],[24,6,1,0,"_expoConstants"],[24,20,1,0],[24,23,1,0,"require"],[24,30,1,0],[24,31,1,0,"_dependencyMap"],[24,45,1,0],[25,2,1,0],[25,6,1,0,"Constants"],[25,15,1,0],[25,18,1,0,"_interopDefault"],[25,33,1,0],[25,34,1,0,"_expoConstants"],[25,48,1,0],[26,2,3,0],[28,2,27,0],[28,8,27,6,"ApiService"],[28,18,27,16],[28,19,27,17],[29,4,30,2,"constructor"],[29,15,30,13,"constructor"],[29,16,30,13],[29,18,30,16],[30,6,31,4],[31,6,32,4],[31,10,32,8],[31,11,32,9,"baseUrl"],[31,18,32,16],[31,21,32,19,"Constants"],[31,30,32,28],[31,31,32,28,"default"],[31,38,32,28],[31,39,32,29,"expoConfig"],[31,49,32,39],[31,51,32,41,"extra"],[31,56,32,46],[31,58,32,48,"backendUrl"],[31,68,32,58],[31,72,33,19,"process"],[31,79,33,26],[31,80,33,27,"env"],[31,83,33,30],[31,84,33,31,"EXPO_PUBLIC_BACKEND_URL"],[31,107,33,54],[31,111,34,19],[31,134,34,42],[33,6,36,4],[34,6,37,4],[34,10,37,8],[34,11,37,9],[34,15,37,13],[34,16,37,14,"baseUrl"],[34,23,37,21],[34,24,37,22,"endsWith"],[34,32,37,30],[34,33,37,31],[34,39,37,37],[34,40,37,38],[34,42,37,40],[35,8,38,6],[35,12,38,10],[35,13,38,11,"baseUrl"],[35,20,38,18],[35,24,38,22],[35,30,38,28],[36,6,39,4],[37,6,41,4,"console"],[37,13,41,11],[37,14,41,12,"log"],[37,17,41,15],[37,18,41,16],[37,58,41,56],[37,60,41,58],[37,64,41,62],[37,65,41,63,"baseUrl"],[37,72,41,70],[37,73,41,71],[38,4,42,2],[40,4,44,2],[41,4,45,2],[41,10,45,16,"fetchWithErrorHandling"],[41,32,45,38,"fetchWithErrorHandling"],[41,33,46,4,"url"],[41,36,46,15],[41,38,47,4,"options"],[41,45,47,24],[41,48,47,27],[41,49,47,28],[41,50,47,29],[41,52,48,16],[42,6,49,4],[42,10,49,8],[43,8,50,6],[43,14,50,12,"response"],[43,22,50,20],[43,25,50,23],[43,31,50,29,"fetch"],[43,36,50,34],[43,37,50,35],[43,40,50,38],[43,44,50,42],[43,45,50,43,"baseUrl"],[43,52,50,50],[43,55,50,53,"url"],[43,58,50,56],[43,60,50,58],[43,62,50,60],[44,10,51,8,"headers"],[44,17,51,15],[44,19,51,17],[45,12,52,10],[45,26,52,24],[45,28,52,26],[45,46,52,44],[46,12,53,10],[46,15,53,13,"options"],[46,22,53,20],[46,23,53,21,"headers"],[47,10,54,8],[47,11,54,9],[48,10,55,8],[48,13,55,11,"options"],[49,8,56,6],[49,9,56,7],[49,10,56,8],[50,8,58,6],[50,12,58,10],[50,13,58,11,"response"],[50,21,58,19],[50,22,58,20,"ok"],[50,24,58,22],[50,26,58,24],[51,10,59,8],[51,16,59,14,"errorText"],[51,25,59,23],[51,28,59,26],[51,34,59,32,"response"],[51,42,59,40],[51,43,59,41,"text"],[51,47,59,45],[51,48,59,46],[51,49,59,47],[52,10,60,8],[52,16,60,14],[52,20,60,18,"Error"],[52,25,60,23],[52,26,60,24],[52,34,60,32,"response"],[52,42,60,40],[52,43,60,41,"status"],[52,49,60,47],[52,54,60,52,"errorText"],[52,63,60,61],[52,65,60,63],[52,66,60,64],[53,8,61,6],[54,8,63,6],[54,15,63,13],[54,21,63,19,"response"],[54,29,63,27],[54,30,63,28,"json"],[54,34,63,32],[54,35,63,33],[54,36,63,34],[55,6,64,4],[55,7,64,5],[55,8,64,6],[55,15,64,13,"error"],[55,20,64,18],[55,22,64,20],[56,8,65,6,"console"],[56,15,65,13],[56,16,65,14,"error"],[56,21,65,19],[56,22,65,20],[56,37,65,35,"url"],[56,40,65,38],[56,43,65,41],[56,45,65,43,"error"],[56,50,65,48],[56,51,65,49],[57,8,66,6],[57,14,66,12,"error"],[57,19,66,17],[58,6,67,4],[59,4,68,2],[61,4,70,2],[62,4,71,2],[62,10,71,15,"healthCheck"],[62,21,71,26,"healthCheck"],[62,22,71,26],[62,24,71,59],[63,6,72,4],[63,13,72,11],[63,17,72,15],[63,18,72,16,"fetchWithErrorHandling"],[63,40,72,38],[63,41,72,60],[63,44,72,63],[63,45,72,64],[64,4,73,2],[66,4,75,2],[67,4,76,2],[67,10,76,15,"createSession"],[67,23,76,28,"createSession"],[67,24,76,29,"sessionData"],[67,35,76,62],[67,37,76,87],[68,6,77,4,"console"],[68,13,77,11],[68,14,77,12,"log"],[68,17,77,15],[68,18,77,16],[68,37,77,35],[68,39,77,37,"sessionData"],[68,50,77,48],[68,51,77,49],[69,6,78,4],[69,13,78,11],[69,17,78,15],[69,18,78,16,"fetchWithErrorHandling"],[69,40,78,38],[69,41,78,53],[69,52,78,64],[69,54,78,66],[70,8,79,6,"method"],[70,14,79,12],[70,16,79,14],[70,22,79,20],[71,8,80,6,"body"],[71,12,80,10],[71,14,80,12,"JSON"],[71,18,80,16],[71,19,80,17,"stringify"],[71,28,80,26],[71,29,80,27,"sessionData"],[71,40,80,38],[72,6,81,4],[72,7,81,5],[72,8,81,6],[73,4,82,2],[75,4,84,2],[76,4,85,2],[76,10,85,15,"updateSession"],[76,23,85,28,"updateSession"],[76,24,86,4,"sessionId"],[76,33,86,21],[76,35,87,4,"updateData"],[76,45,87,36],[76,47,88,27],[77,6,89,4,"console"],[77,13,89,11],[77,14,89,12,"log"],[77,17,89,15],[77,18,89,16],[77,38,89,36,"sessionId"],[77,47,89,45],[77,50,89,48],[77,52,89,50,"updateData"],[77,62,89,60],[77,63,89,61],[78,6,90,4],[78,13,90,11],[78,17,90,15],[78,18,90,16,"fetchWithErrorHandling"],[78,40,90,38],[78,41,90,53],[78,54,90,66,"sessionId"],[78,63,90,75],[78,65,90,77],[78,67,90,79],[79,8,91,6,"method"],[79,14,91,12],[79,16,91,14],[79,21,91,19],[80,8,92,6,"body"],[80,12,92,10],[80,14,92,12,"JSON"],[80,18,92,16],[80,19,92,17,"stringify"],[80,28,92,26],[80,29,92,27,"updateData"],[80,39,92,37],[81,6,93,4],[81,7,93,5],[81,8,93,6],[82,4,94,2],[84,4,96,2],[85,4,97,2],[85,10,97,15,"getUserSessions"],[85,25,97,30,"getUserSessions"],[85,26,97,31,"userId"],[85,32,97,45],[85,34,97,72],[86,6,98,4,"console"],[86,13,98,11],[86,14,98,12,"log"],[86,17,98,15],[86,18,98,16],[86,48,98,46,"userId"],[86,54,98,52],[86,56,98,54],[86,57,98,55],[87,6,99,4],[87,13,99,11],[87,17,99,15],[87,18,99,16,"fetchWithErrorHandling"],[87,40,99,38],[87,41,99,55],[87,54,99,68,"userId"],[87,60,99,74],[87,62,99,76],[87,63,99,77],[88,4,100,2],[90,4,102,2],[91,4,103,2],[91,10,103,15,"endSession"],[91,20,103,25,"endSession"],[91,21,103,26,"sessionId"],[91,30,103,43],[91,32,103,45,"duration"],[91,40,103,61],[91,42,103,86],[92,6,104,4],[92,12,104,10,"endTime"],[92,19,104,17],[92,22,104,20],[92,26,104,24,"Date"],[92,30,104,28],[92,31,104,29],[92,32,104,30],[92,33,104,31,"toISOString"],[92,44,104,42],[92,45,104,43],[92,46,104,44],[93,6,105,4],[93,13,105,11],[93,17,105,15],[93,18,105,16,"updateSession"],[93,31,105,29],[93,32,105,30,"sessionId"],[93,41,105,39],[93,43,105,41],[94,8,106,6,"duration"],[94,16,106,14],[95,8,107,6,"is_active"],[95,17,107,15],[95,19,107,17],[95,24,107,22],[96,8,108,6,"end_time"],[96,16,108,14],[96,18,108,16,"endTime"],[97,6,109,4],[97,7,109,5],[97,8,109,6],[98,4,110,2],[100,4,112,2],[101,4,113,2],[101,10,113,15,"setSessionBreak"],[101,25,113,30,"setSessionBreak"],[101,26,113,31,"sessionId"],[101,35,113,48],[101,37,113,50,"isBreak"],[101,44,113,66],[101,46,113,91],[102,6,114,4],[102,13,114,11],[102,17,114,15],[102,18,114,16,"updateSession"],[102,31,114,29],[102,32,114,30,"sessionId"],[102,41,114,39],[102,43,114,41],[103,8,115,6,"is_break"],[103,16,115,14],[103,18,115,16,"isBreak"],[104,6,116,4],[104,7,116,5],[104,8,116,6],[105,4,117,2],[107,4,119,2],[108,4,120,2],[108,10,120,15,"updateSessionDuration"],[108,31,120,36,"updateSessionDuration"],[108,32,120,37,"sessionId"],[108,41,120,54],[108,43,120,56,"duration"],[108,51,120,72],[108,53,120,97],[109,6,121,4],[109,13,121,11],[109,17,121,15],[109,18,121,16,"updateSession"],[109,31,121,29],[109,32,121,30,"sessionId"],[109,41,121,39],[109,43,121,41],[110,8,122,6,"duration"],[111,6,123,4],[111,7,123,5],[111,8,123,6],[112,4,124,2],[113,2,125,0],[115,2,127,0],[116,2,128,7],[116,8,128,13,"apiService"],[116,18,128,23],[116,21,128,26],[116,25,128,30,"ApiService"],[116,35,128,40],[116,36,128,41],[116,37,128,42],[117,2,129,0],[117,6,129,0,"_default"],[117,14,129,0],[117,17,129,15,"apiService"],[117,27,129,25],[118,0,129,26],[118,3]],"functionMap":{"names":["<global>","ApiService","ApiService#constructor","ApiService#fetchWithErrorHandling","ApiService#healthCheck","ApiService#createSession","ApiService#updateSession","ApiService#getUserSessions","ApiService#endSession","ApiService#setSessionBreak","ApiService#updateSessionDuration"],"mappings":"AAA;AC0B;ECG;GDY;EEG;GFuB;EGG;GHE;EIG;GJM;EKG;GLS;EMG;GNG;EOG;GPO;EQG;GRI;ESG;GTI;CDC"},"hasCjsExports":false},"type":"js/module"}]}
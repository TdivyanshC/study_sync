{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":39,"index":39}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"apiService\", {\n    enumerable: true,\n    get: function () {\n      return apiService;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _expoConstants = require(_dependencyMap[1], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  // Types for API responses\n\n  class ApiService {\n    constructor() {\n      // Get backend URL from environment\n      this.baseUrl = Constants.default.expoConfig?.extra?.backendUrl || _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || 'http://localhost:8001';\n\n      // Ensure it has /api suffix\n      if (!this.baseUrl.endsWith('/api')) {\n        this.baseUrl += '/api';\n      }\n      console.log('API Service initialized with base URL:', this.baseUrl);\n    }\n\n    // Generic fetch wrapper with error handling\n    async fetchWithErrorHandling(url, options = {}) {\n      try {\n        const response = await fetch(`${this.baseUrl}${url}`, {\n          headers: {\n            'Content-Type': 'application/json',\n            ...options.headers\n          },\n          ...options\n        });\n        if (!response.ok) {\n          const errorText = await response.text();\n          throw new Error(`HTTP ${response.status}: ${errorText}`);\n        }\n        return await response.json();\n      } catch (error) {\n        console.error(`API Error - ${url}:`, error);\n        throw error;\n      }\n    }\n\n    // Health check\n    async healthCheck() {\n      return this.fetchWithErrorHandling('/');\n    }\n\n    // Create a new study session\n    async createSession(sessionData) {\n      console.log('Creating session:', sessionData);\n      return this.fetchWithErrorHandling('/sessions', {\n        method: 'POST',\n        body: JSON.stringify(sessionData)\n      });\n    }\n\n    // Update an existing study session\n    async updateSession(sessionId, updateData) {\n      console.log(`Updating session ${sessionId}:`, updateData);\n      return this.fetchWithErrorHandling(`/sessions/${sessionId}`, {\n        method: 'PUT',\n        body: JSON.stringify(updateData)\n      });\n    }\n\n    // Get all sessions for a user\n    async getUserSessions(userId) {\n      console.log(`Getting sessions for user: ${userId}`);\n      return this.fetchWithErrorHandling(`/sessions/${userId}`);\n    }\n\n    // End a study session\n    async endSession(sessionId, duration) {\n      const endTime = new Date().toISOString();\n      return this.updateSession(sessionId, {\n        duration,\n        is_active: false,\n        end_time: endTime\n      });\n    }\n\n    // Set session to break mode\n    async setSessionBreak(sessionId, isBreak) {\n      return this.updateSession(sessionId, {\n        is_break: isBreak\n      });\n    }\n\n    // Update session duration (called periodically while timer is running)\n    async updateSessionDuration(sessionId, duration) {\n      return this.updateSession(sessionId, {\n        duration\n      });\n    }\n  }\n\n  // Export singleton instance\n  const apiService = new ApiService();\n  var _default = apiService;\n});","lineCount":119,"map":[[12,2,129,0,"Object"],[12,8,129,0],[12,9,129,0,"defineProperty"],[12,23,129,0],[12,24,129,0,"exports"],[12,31,129,0],[13,4,129,0,"enumerable"],[13,14,129,0],[14,4,129,0,"get"],[14,7,129,0],[14,18,129,0,"get"],[14,19,129,0],[15,6,129,0],[15,13,129,0,"_default"],[15,21,129,0],[16,4,129,0],[17,2,129,0],[18,2,128,0,"Object"],[18,8,128,0],[18,9,128,0,"defineProperty"],[18,23,128,0],[18,24,128,0,"exports"],[18,31,128,0],[19,4,128,0,"enumerable"],[19,14,128,0],[20,4,128,0,"get"],[20,7,128,0],[20,18,128,0,"get"],[20,19,128,0],[21,6,128,0],[21,13,128,0,"apiService"],[21,23,128,0],[22,4,128,0],[23,2,128,0],[24,2,128,43],[24,6,128,43,"_expoVirtualEnv"],[24,21,128,43],[24,24,128,43,"require"],[24,31,128,43],[24,32,128,43,"_dependencyMap"],[24,46,128,43],[25,2,1,0],[25,6,1,0,"_expoConstants"],[25,20,1,0],[25,23,1,0,"require"],[25,30,1,0],[25,31,1,0,"_dependencyMap"],[25,45,1,0],[26,2,1,0],[26,6,1,0,"Constants"],[26,15,1,0],[26,18,1,0,"_interopDefault"],[26,33,1,0],[26,34,1,0,"_expoConstants"],[26,48,1,0],[27,2,3,0],[29,2,27,0],[29,8,27,6,"ApiService"],[29,18,27,16],[29,19,27,17],[30,4,30,2,"constructor"],[30,15,30,13,"constructor"],[30,16,30,13],[30,18,30,16],[31,6,31,4],[32,6,32,4],[32,10,32,8],[32,11,32,9,"baseUrl"],[32,18,32,16],[32,21,32,19,"Constants"],[32,30,32,28],[32,31,32,28,"default"],[32,38,32,28],[32,39,32,29,"expoConfig"],[32,49,32,39],[32,51,32,41,"extra"],[32,56,32,46],[32,58,32,48,"backendUrl"],[32,68,32,58],[32,72,32,58,"_expoVirtualEnv"],[32,87,32,58],[32,88,32,58,"env"],[32,91,32,58],[32,92,32,58,"EXPO_PUBLIC_BACKEND_URL"],[32,115,33,54],[32,119,34,19],[32,142,34,42],[34,6,36,4],[35,6,37,4],[35,10,37,8],[35,11,37,9],[35,15,37,13],[35,16,37,14,"baseUrl"],[35,23,37,21],[35,24,37,22,"endsWith"],[35,32,37,30],[35,33,37,31],[35,39,37,37],[35,40,37,38],[35,42,37,40],[36,8,38,6],[36,12,38,10],[36,13,38,11,"baseUrl"],[36,20,38,18],[36,24,38,22],[36,30,38,28],[37,6,39,4],[38,6,41,4,"console"],[38,13,41,11],[38,14,41,12,"log"],[38,17,41,15],[38,18,41,16],[38,58,41,56],[38,60,41,58],[38,64,41,62],[38,65,41,63,"baseUrl"],[38,72,41,70],[38,73,41,71],[39,4,42,2],[41,4,44,2],[42,4,45,2],[42,10,45,16,"fetchWithErrorHandling"],[42,32,45,38,"fetchWithErrorHandling"],[42,33,46,4,"url"],[42,36,46,15],[42,38,47,4,"options"],[42,45,47,24],[42,48,47,27],[42,49,47,28],[42,50,47,29],[42,52,48,16],[43,6,49,4],[43,10,49,8],[44,8,50,6],[44,14,50,12,"response"],[44,22,50,20],[44,25,50,23],[44,31,50,29,"fetch"],[44,36,50,34],[44,37,50,35],[44,40,50,38],[44,44,50,42],[44,45,50,43,"baseUrl"],[44,52,50,50],[44,55,50,53,"url"],[44,58,50,56],[44,60,50,58],[44,62,50,60],[45,10,51,8,"headers"],[45,17,51,15],[45,19,51,17],[46,12,52,10],[46,26,52,24],[46,28,52,26],[46,46,52,44],[47,12,53,10],[47,15,53,13,"options"],[47,22,53,20],[47,23,53,21,"headers"],[48,10,54,8],[48,11,54,9],[49,10,55,8],[49,13,55,11,"options"],[50,8,56,6],[50,9,56,7],[50,10,56,8],[51,8,58,6],[51,12,58,10],[51,13,58,11,"response"],[51,21,58,19],[51,22,58,20,"ok"],[51,24,58,22],[51,26,58,24],[52,10,59,8],[52,16,59,14,"errorText"],[52,25,59,23],[52,28,59,26],[52,34,59,32,"response"],[52,42,59,40],[52,43,59,41,"text"],[52,47,59,45],[52,48,59,46],[52,49,59,47],[53,10,60,8],[53,16,60,14],[53,20,60,18,"Error"],[53,25,60,23],[53,26,60,24],[53,34,60,32,"response"],[53,42,60,40],[53,43,60,41,"status"],[53,49,60,47],[53,54,60,52,"errorText"],[53,63,60,61],[53,65,60,63],[53,66,60,64],[54,8,61,6],[55,8,63,6],[55,15,63,13],[55,21,63,19,"response"],[55,29,63,27],[55,30,63,28,"json"],[55,34,63,32],[55,35,63,33],[55,36,63,34],[56,6,64,4],[56,7,64,5],[56,8,64,6],[56,15,64,13,"error"],[56,20,64,18],[56,22,64,20],[57,8,65,6,"console"],[57,15,65,13],[57,16,65,14,"error"],[57,21,65,19],[57,22,65,20],[57,37,65,35,"url"],[57,40,65,38],[57,43,65,41],[57,45,65,43,"error"],[57,50,65,48],[57,51,65,49],[58,8,66,6],[58,14,66,12,"error"],[58,19,66,17],[59,6,67,4],[60,4,68,2],[62,4,70,2],[63,4,71,2],[63,10,71,15,"healthCheck"],[63,21,71,26,"healthCheck"],[63,22,71,26],[63,24,71,59],[64,6,72,4],[64,13,72,11],[64,17,72,15],[64,18,72,16,"fetchWithErrorHandling"],[64,40,72,38],[64,41,72,60],[64,44,72,63],[64,45,72,64],[65,4,73,2],[67,4,75,2],[68,4,76,2],[68,10,76,15,"createSession"],[68,23,76,28,"createSession"],[68,24,76,29,"sessionData"],[68,35,76,62],[68,37,76,87],[69,6,77,4,"console"],[69,13,77,11],[69,14,77,12,"log"],[69,17,77,15],[69,18,77,16],[69,37,77,35],[69,39,77,37,"sessionData"],[69,50,77,48],[69,51,77,49],[70,6,78,4],[70,13,78,11],[70,17,78,15],[70,18,78,16,"fetchWithErrorHandling"],[70,40,78,38],[70,41,78,53],[70,52,78,64],[70,54,78,66],[71,8,79,6,"method"],[71,14,79,12],[71,16,79,14],[71,22,79,20],[72,8,80,6,"body"],[72,12,80,10],[72,14,80,12,"JSON"],[72,18,80,16],[72,19,80,17,"stringify"],[72,28,80,26],[72,29,80,27,"sessionData"],[72,40,80,38],[73,6,81,4],[73,7,81,5],[73,8,81,6],[74,4,82,2],[76,4,84,2],[77,4,85,2],[77,10,85,15,"updateSession"],[77,23,85,28,"updateSession"],[77,24,86,4,"sessionId"],[77,33,86,21],[77,35,87,4,"updateData"],[77,45,87,36],[77,47,88,27],[78,6,89,4,"console"],[78,13,89,11],[78,14,89,12,"log"],[78,17,89,15],[78,18,89,16],[78,38,89,36,"sessionId"],[78,47,89,45],[78,50,89,48],[78,52,89,50,"updateData"],[78,62,89,60],[78,63,89,61],[79,6,90,4],[79,13,90,11],[79,17,90,15],[79,18,90,16,"fetchWithErrorHandling"],[79,40,90,38],[79,41,90,53],[79,54,90,66,"sessionId"],[79,63,90,75],[79,65,90,77],[79,67,90,79],[80,8,91,6,"method"],[80,14,91,12],[80,16,91,14],[80,21,91,19],[81,8,92,6,"body"],[81,12,92,10],[81,14,92,12,"JSON"],[81,18,92,16],[81,19,92,17,"stringify"],[81,28,92,26],[81,29,92,27,"updateData"],[81,39,92,37],[82,6,93,4],[82,7,93,5],[82,8,93,6],[83,4,94,2],[85,4,96,2],[86,4,97,2],[86,10,97,15,"getUserSessions"],[86,25,97,30,"getUserSessions"],[86,26,97,31,"userId"],[86,32,97,45],[86,34,97,72],[87,6,98,4,"console"],[87,13,98,11],[87,14,98,12,"log"],[87,17,98,15],[87,18,98,16],[87,48,98,46,"userId"],[87,54,98,52],[87,56,98,54],[87,57,98,55],[88,6,99,4],[88,13,99,11],[88,17,99,15],[88,18,99,16,"fetchWithErrorHandling"],[88,40,99,38],[88,41,99,55],[88,54,99,68,"userId"],[88,60,99,74],[88,62,99,76],[88,63,99,77],[89,4,100,2],[91,4,102,2],[92,4,103,2],[92,10,103,15,"endSession"],[92,20,103,25,"endSession"],[92,21,103,26,"sessionId"],[92,30,103,43],[92,32,103,45,"duration"],[92,40,103,61],[92,42,103,86],[93,6,104,4],[93,12,104,10,"endTime"],[93,19,104,17],[93,22,104,20],[93,26,104,24,"Date"],[93,30,104,28],[93,31,104,29],[93,32,104,30],[93,33,104,31,"toISOString"],[93,44,104,42],[93,45,104,43],[93,46,104,44],[94,6,105,4],[94,13,105,11],[94,17,105,15],[94,18,105,16,"updateSession"],[94,31,105,29],[94,32,105,30,"sessionId"],[94,41,105,39],[94,43,105,41],[95,8,106,6,"duration"],[95,16,106,14],[96,8,107,6,"is_active"],[96,17,107,15],[96,19,107,17],[96,24,107,22],[97,8,108,6,"end_time"],[97,16,108,14],[97,18,108,16,"endTime"],[98,6,109,4],[98,7,109,5],[98,8,109,6],[99,4,110,2],[101,4,112,2],[102,4,113,2],[102,10,113,15,"setSessionBreak"],[102,25,113,30,"setSessionBreak"],[102,26,113,31,"sessionId"],[102,35,113,48],[102,37,113,50,"isBreak"],[102,44,113,66],[102,46,113,91],[103,6,114,4],[103,13,114,11],[103,17,114,15],[103,18,114,16,"updateSession"],[103,31,114,29],[103,32,114,30,"sessionId"],[103,41,114,39],[103,43,114,41],[104,8,115,6,"is_break"],[104,16,115,14],[104,18,115,16,"isBreak"],[105,6,116,4],[105,7,116,5],[105,8,116,6],[106,4,117,2],[108,4,119,2],[109,4,120,2],[109,10,120,15,"updateSessionDuration"],[109,31,120,36,"updateSessionDuration"],[109,32,120,37,"sessionId"],[109,41,120,54],[109,43,120,56,"duration"],[109,51,120,72],[109,53,120,97],[110,6,121,4],[110,13,121,11],[110,17,121,15],[110,18,121,16,"updateSession"],[110,31,121,29],[110,32,121,30,"sessionId"],[110,41,121,39],[110,43,121,41],[111,8,122,6,"duration"],[112,6,123,4],[112,7,123,5],[112,8,123,6],[113,4,124,2],[114,2,125,0],[116,2,127,0],[117,2,128,7],[117,8,128,13,"apiService"],[117,18,128,23],[117,21,128,26],[117,25,128,30,"ApiService"],[117,35,128,40],[117,36,128,41],[117,37,128,42],[118,2,129,0],[118,6,129,0,"_default"],[118,14,129,0],[118,17,129,15,"apiService"],[118,27,129,25],[119,0,129,26],[119,3]],"functionMap":{"names":["<global>","ApiService","ApiService#constructor","ApiService#fetchWithErrorHandling","ApiService#healthCheck","ApiService#createSession","ApiService#updateSession","ApiService#getUserSessions","ApiService#endSession","ApiService#setSessionBreak","ApiService#updateSessionDuration"],"mappings":"AAA;AC0B;ECG;GDY;EEG;GFuB;EGG;GHE;EIG;GJM;EKG;GLS;EMG;GNG;EOG;GPO;EQG;GRI;ESG;GTI;CDC"},"hasCjsExports":false},"type":"js/module"}]}